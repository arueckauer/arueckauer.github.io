<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author"
    content="Andi Rückauer ">
<meta name="description"
    content="Windows services usually run under the System account. In cases where a service needs SSH access like cloning a Git repository, a SSH key pair might be required. But how do you generate these keys for the System account?
The Sysinternals Process Utilities provide PowerShell tools. Among these is PsExec, which can be used to invoke a process on a remote machine. But it also allows executing a process on the same machine under a different user." />
<meta name="keywords" content="andi, rückauer, blog, software, development" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://arueckauer.github.io/posts/2020/04/generate-ssh-keys-for-windows-system-account/" />


<title>
    
    Generate SSH Keys for Windows System account :: Andi Rückauer  — Thoughts container
    
</title>



<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.1/css/flag-icon.min.css" rel="stylesheet"
    type="text/css">



<link rel="stylesheet" href="https://arueckauer.github.io/main.min.cabb110faab88d3545467f36114f6bf3ac23f81434679cf37338752570b2eda1.css">



<link rel="apple-touch-icon" sizes="180x180" href="https://arueckauer.github.io/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://arueckauer.github.io/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="https://arueckauer.github.io/favicon-16x16.png">
<link rel="manifest" href="https://arueckauer.github.io/site.webmanifest">
<link rel="mask-icon" href="https://arueckauer.github.io/safari-pinned-tab.svg" color="#252627">
<link rel="shortcut icon" href="https://arueckauer.github.io/favicon.ico">
<meta name="theme-color" content="#252627"><meta itemprop="name" content="Generate SSH Keys for Windows System account">
<meta itemprop="description" content="Windows services usually run under the System account. In cases where a service needs SSH access like cloning a Git repository, a SSH key pair might be required. But how do you generate these keys for the System account?
The Sysinternals Process Utilities provide PowerShell tools. Among these is PsExec, which can be used to invoke a process on a remote machine. But it also allows executing a process on the same machine under a different user."><meta itemprop="datePublished" content="2020-04-21T10:27:32+02:00" />
<meta itemprop="dateModified" content="2020-04-29T10:05:02+02:00" />
<meta itemprop="wordCount" content="226"><meta itemprop="image" content="https://arueckauer.github.io/"/>
<meta itemprop="keywords" content="windows,ssh," /><meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://arueckauer.github.io/"/>

<meta name="twitter:title" content="Generate SSH Keys for Windows System account"/>
<meta name="twitter:description" content="Windows services usually run under the System account. In cases where a service needs SSH access like cloning a Git repository, a SSH key pair might be required. But how do you generate these keys for the System account?
The Sysinternals Process Utilities provide PowerShell tools. Among these is PsExec, which can be used to invoke a process on a remote machine. But it also allows executing a process on the same machine under a different user."/>




<meta property="article:published_time" content="2020-04-21 10:27:32 &#43;0200 CEST" />







    </head>

    <body class="">
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="https://arueckauer.github.io/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text">Thoughts Container</span>
            <span class="logo__cursor"></span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="https://arueckauer.github.io/about">About</a></li><li><a href="https://arueckauer.github.io/posts">Blog</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            

            <span class="theme-toggle"><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
  <path d="M22 41C32.4934 41 41 32.4934 41 22C41 11.5066 32.4934 3 22
  3C11.5066 3 3 11.5066 3 22C3 32.4934 11.5066 41 22 41ZM7 22C7
  13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22Z"/>
</svg>
</span>
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>2 minutes

            

            </p>
        </div>

        <article>
            <h1 class="post-title"><a href="https://arueckauer.github.io/posts/2020/04/generate-ssh-keys-for-windows-system-account/">Generate SSH Keys for Windows System account</a></h1>

            

            <div class="post-content">
                <p>Windows services usually run under the System account. In cases where a service needs SSH access like cloning a Git repository, a SSH key pair might be required. But how do you generate these keys for the System account?</p>
<p>The Sysinternals Process Utilities provide PowerShell tools. Among these is <a href="https://docs.microsoft.com/en-us/sysinternals/downloads/psexec">PsExec</a>, which can be used to invoke a process on a remote machine. But it also allows executing a process on the same machine under a different user. A detailed description on how to download and use this tool is provided in the above linked article.</p>
<h2 id="start-a-powershell-in-the-system-account">Start a PowerShell in the System account</h2>
<p>For our purpose, we open an elevated PowerShell and start another PowerShell which is then run with the System account.</p>
<pre><code class="language-powershell">PsExec.exe -ids powershell.exe
</code></pre>
<ul>
<li><code>-i</code> Runs the process in the console session</li>
<li><code>-d</code> Start the process non-interactive - do not wait for the process to end</li>
<li><code>-s</code> Runs the process in the System account</li>
</ul>
<h2 id="generate-ssh-keys">Generate SSH keys</h2>
<p>In the new PowerShell keys can be generated as usual, e.g.</p>
<pre><code class="language-powershell">ssh-keygen.exe -t rsa
</code></pre>
<h2 id="location-of-systems-account-ssh-keys">Location of System&rsquo;s account SSH keys</h2>
<p>Other than human user accounts, the user&rsquo;s home path is not located in <code>C:\Users</code>. The SSH keys of the System account are in <code>C:\WINDOWS\system32\config\systemprofile\.ssh</code>. Since other users cannot access this path, it is a good idea to copy the public key now to a path which is accessible.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
                <p>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg><span class="tag"><a href="https://arueckauer.github.io/tags/windows">windows</a></span><span class="tag"><a href="https://arueckauer.github.io/tags/ssh">ssh</a></span>
                </p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file-text"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><polyline points="14 2 14 8 20 8"></polyline><line x1="16" y1="13" x2="8" y2="13"></line><line x1="16" y1="17" x2="8" y2="17"></line><polyline points="10 9 9 9 8 9"></polyline></svg>226 Words</p>

            <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-calendar"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>2020-04-21 10:27 &#43;0200</p>
                <p><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"></circle><line x1="1.05" y1="12" x2="7" y2="12"></line><line x1="17.01" y1="12" x2="22.96" y2="12"></line></svg><a href="https://github.com/arueckauer/blog/commit/011cd4f3bd11cf0927e46b9c58d9b2a5923f43ba" target="_blank" rel="noopener">011cd4f</a> @ 2020-04-29</p>
        </div>

        
            <div class="pagination">
                <div class="pagination__title">
                    <span class="pagination__title-h">Read other posts</span>
                    <hr />
                </div>

                <div class="pagination__buttons">
                    
                        <span class="button previous">
                            <a href="https://arueckauer.github.io/posts/2020/04/how-to-setup-passwordless-ssh-login-to-nine-server/">
                                <span class="button__icon">←</span>
                                <span class="button__text">How to Setup passwordless SSH Login to Nine Server</span>
                            </a>
                        </span>
                    

                    
                        <span class="button next">
                            <a href="https://arueckauer.github.io/posts/2020/01/how-to-minimize-signal-desktop-app-to-system-try/">
                                <span class="button__text">How to minimize Signal desktop app to system try</span>
                                <span class="button__icon">→</span>
                            </a>
                        </span>
                    
                </div>
            </div>
        

        
    </main>

            </div>

            
                <footer class="footer">
    <div class="footer__inner">
        <div class="footer__content">
            <span>&copy; 2023</span>
            
                <span><a href="https://arueckauer.github.io/">Andi Rückauer</a></span>
            
            <span><a href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC BY-NC 4.0</a></span>
            <span> <a href="https://arueckauer.github.io/posts/index.xml" target="_blank" title="rss"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 20 20" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss"><path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle></svg></a></span>
        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">

        </div>
    </div>
    <div class="footer__inner">
        <div class="footer__content">
            <span>Powered by <a href="http://gohugo.io">Hugo</a></span>
            <span>Made with &#10084; by <a href="https://github.com/rhazdon">rhazdon</a></span>
        </div>
    </div>
</footer>

            
        </div>

        




<script type="text/javascript" src="https://arueckauer.github.io/bundle.min.70004749d7b6d0f87e110ca85b40838ec55915bb2dd29b18758517db8b3a131bbb53cdbb99a553d079f8e5e30a6c5eccf4a057356a7d24d94a071f05100fd11b.js" integrity="sha512-cABHSde20Ph&#43;EQyoW0CDjsVZFbst0psYdYUX24s6Exu7U827maVT0Hn45eMKbF7M9KBXNWp9JNlKBx8FEA/RGw=="></script>
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-DS58P4P02H"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'G-DS58P4P02H');
	</script>


	
		<script src="https://unpkg.com/feather-icons"></script>
	


<script>
    feather.replace()
</script>
g

    </body>
</html>
